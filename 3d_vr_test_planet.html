<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <title>NASA VR Solar System - Interactive</title>

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

</head>

<body>

  <a-scene background="color: black">

 

    <a-assets>

        <img id="skyTexture" src="textures/sky.jpg">

        <img id="mercuryTexture" src="textures/mercury.jpg">

        <img id="venusTexture" src="textures/venus.jpg">

        <img id="earthTexture" src="textures/earth.jpg">

        <img id="marsTexture" src="textures/mars.jpg">

        <img id="jupiterTexture" src="textures/jupiter.jpg">

        <img id="saturnTexture" src="textures/saturn.jpg">

        <img id="uranusTexture" src="textures/uranus.jpg">

        <img id="neptuneTexture" src="textures/neptune.jpg">

        <img id="saturnRingTexture" src="textures/saturnrings.png">

        <img id="asteroidTexture" src="textures/asteroid.jpg">

        <img id="labelBgTexture" src="textures/label-background.png">

        <img id="infoPanelBgTexture" src="textures/infopanel-background.png">

        <audio id="soundtrackAudio" src="soundtrack.mp3" preload="auto"></audio>

    </a-assets>

 

    <a-sky src="#skyTexture"></a-sky>

 

    <a-entity light="type: ambient; color: #666"></a-entity>

    <a-entity light="type: directional; color: #FFF; intensity: 0.6" position="-1 1 0.5"></a-entity>

 

 

    <a-entity id="planets"></a-entity>

 

    <a-sphere position="-15 8 -20" radius="0.5"

      material="shader: flat; src: #asteroidTexture"

      animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear">

    </a-sphere>

 

    <a-entity id="rig" position="0 1.6 0">

      <a-camera id="camera" wasd-controls-enabled="true" look-controls="true"></a-camera>

 

      <a-entity id="info-panel" position="1.5 0 -2.5" rotation="0 -30 0" visible="false">

        <a-plane width="2" height="1.5" material="src: #infoPanelBgTexture; transparent: true; opacity: 0.9" side="double"></a-plane>

        <a-text id="info-title" value="Gezegen Adı" color="#FFF" align="center" width="3" position="0 0.55 0.01" font="mozillavr" shader="msdf"></a-text>

        <a-text id="info-text" value="Gezegen hakkında bilgiler burada yer alacak." color="#FFF" align="left" width="1.8" position="-0.9 0.3 0.01" wrap-count="35"></a-text>

      </a-entity>

 

      <a-entity laser-controls="hand: right" raycaster="objects: .planet;"></a-entity>

      <a-entity laser-controls="hand: left" raycaster="objects: .planet;"></a-entity>

    </a-entity>

 

    <a-entity sound="src: #soundtrackAudio; autoplay: true; loop: true; volume: 0.5"></a-entity>

 

  </a-scene>

 

  <script>

    // KALDIRILDI: Sorun çıkaran 'scale-on-distance' bileşeni tamamen kaldırıldı.

 

    const planetData = [

      {name:"mercury", radius:0.4, texture:"#mercuryTexture", dur:20000, info: "Gunese en yakin gezegendir. Yuzeyi kraterlerle kaplidir ve atmosferi yok denecek kadar incedir."},

      {name:"venus", radius:0.9, texture:"#venusTexture", dur:50000, info: "Yogun atmosferi nedeniyle Sistem'deki en sicak gezegendir. Yuzey sicakligi 465°C'yi bulabilir."},

      {name:"earth", radius:1.0, texture:"#earthTexture", dur:40000, info: "Uzerinde sivi su ve yasam barindirdigi bilinen tek gezegendir. Zengin bir atmosfere ve manyetik alana sahiptir."},

      {name:"mars", radius:0.7, texture:"#marsTexture", dur:30000, info: "Kizil Gezegen olarak da bilinir. Yuzeyinde demir oksit bulunur. Ince bir atmosferi ve kutuplarinda buzullari vardir."},

      {name:"jupiter", radius:2.5, texture:"#jupiterTexture", dur:60000, info: "Gunese sistemindeki en buyuk gezegendir. Buyuk Kirmizi Leke olarak bilinen dev bir firtinaya sahiptir."},

      {name:"saturn", radius:2.0, texture:"#saturnTexture", dur:65000, ring:true, info: "Buz ve kaya parcalarindan olusan etkileyici halka sistemiyle taninir. Cok dusuk bir yogunluga sahiptir."},

      {name:"uranus", radius:1.5, texture:"#uranusTexture", dur:70000, info: "Yan yatmis gibi donen tek gezegendir. Metan gazindan olusan atmosferi ona mavi-yesil bir renk verir."},

      {name:"neptune", radius:1.5, texture:"#neptuneTexture", dur:75000, info: "Gunese en uzak gezegendir. Cok guclu ruzgarlara ve firtinalara sahne olur."}

    ];

 

    const placed = [];

    function getRandomPosition() {

      let pos;

      let valid = false;

      while (!valid) {

        pos = {x: Math.random()*50-25, y: 2+Math.random()*5, z: -(15+Math.random()*40)};

        valid = true;

        for (let p of placed) {

          const dx = pos.x - p.x, dy = pos.y - p.y, dz = pos.z - p.z;

          if (Math.sqrt(dx*dx + dy*dy + dz*dz)<8){ valid=false; break;}

        }

      }

      placed.push(pos);

      return pos;

    }

 

    const planetsContainer = document.querySelector("#planets");

 

    planetData.forEach(planet => {

      const pos = getRandomPosition();

 

      // Gezegen küresi

      const el = document.createElement("a-sphere");

      el.setAttribute("position", `${pos.x} ${pos.y} ${pos.z}`);

      el.setAttribute("radius", planet.radius);

      el.setAttribute("material", `shader: standard; src: ${planet.texture}`);

      el.setAttribute("animation", `property: rotation; to: 0 360 0; loop: true; dur: ${planet.dur}; easing: linear`);

      el.classList.add("planet");

      el.dataset.name = planet.name;

      planetsContainer.appendChild(el);

 

      // Etiket Bölümü

      const labelContainer = document.createElement("a-entity");

      labelContainer.setAttribute("position", `${pos.x} ${pos.y + planet.radius + 1.5} ${pos.z}`);

      

      // DEĞİŞTİRİLDİ: 'scale-on-distance' yerine, etiketin sürekli kameraya bakmasını sağlayan 'look-at' bileşeni eklendi.

      labelContainer.setAttribute("look-at", "[camera]");

      

      labelContainer.setAttribute("animation", `property: position; dir: alternate; dur: 2000; loop: true; to: ${pos.x} ${pos.y + planet.radius + 1.8} ${pos.z}; easing: easeInOutSine`);

 

      const backgroundPlane = document.createElement("a-plane");

      // Etiket kutusunun ve yazısının başlangıç boyutunu biraz küçülttüm, çünkü artık büyümeyecekler.

      backgroundPlane.setAttribute("width", "4"); 

      backgroundPlane.setAttribute("height", "1");

      backgroundPlane.setAttribute("side", "double");

      backgroundPlane.setAttribute("material", "shader: flat; src: #labelBgTexture; transparent: true; opacity: 0.9;");

 

      const labelText = document.createElement("a-text");

      labelText.setAttribute("value", planet.name.toUpperCase());

      labelText.setAttribute("align", "center");

      labelText.setAttribute("color", "#FFFFFF");

      labelText.setAttribute("width", "5"); // Genişliği kutuyla uyumlu hale getirdim.

      labelText.setAttribute("position", "0 0 0.01");

      labelText.setAttribute("font", "mozillavr");

      labelText.setAttribute("shader", "msdf");

 

      labelContainer.appendChild(backgroundPlane);

      labelContainer.appendChild(labelText);

      planetsContainer.appendChild(labelContainer);

      

      // Saturn halkası

      if (planet.ring) {

        const ring = document.createElement("a-ring");

        ring.setAttribute("position", `${pos.x} ${pos.y} ${pos.z}`);

        ring.setAttribute("rotation", "90 0 0");

        ring.setAttribute("material", "shader: flat; src: #saturnRingTexture; transparent:true; opacity:0.8");

        ring.setAttribute("radius-inner", planet.radius + 0.2);

        ring.setAttribute("radius-outer", planet.radius + 1.2);

        planetsContainer.appendChild(ring);

      }

    });

 

    // Bilgi Paneli Kontrol Kodu (Değişiklik yok)

    const sceneEl = document.querySelector('a-scene');

    const infoPanel = document.getElementById('info-panel');

    const infoTitle = document.getElementById('info-title');

    const infoText = document.getElementById('info-text');

    let activePlanet = null;

 

    sceneEl.addEventListener('click', function (evt) {

      if (evt.detail.intersectedEl && evt.detail.intersectedEl.classList.contains('planet')) {

        const clickedPlanetEl = evt.detail.intersectedEl;

        const planetName = clickedPlanetEl.dataset.name;

 

        if (activePlanet === planetName) {

          infoPanel.setAttribute('visible', 'false');

          activePlanet = null;

        } else {

          const planetInfo = planetData.find(p => p.name === planetName);

          if (planetInfo) {

            infoTitle.setAttribute('value', planetInfo.name.toUpperCase());

            infoText.setAttribute('value', planetInfo.info

);

            infoPanel.setAttribute('visible', 'true');

            activePlanet = planetName;

          }

        }

      }

    });

  </script>

</body>

</html>
